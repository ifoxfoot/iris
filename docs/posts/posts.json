[
  {
    "path": "posts/2021-03-01-pca-plot/",
    "title": "PCA Biplot",
    "description": "Principle Component Analysis and visualization using monkeys!",
    "author": [
      {
        "name": "iris foxfoot",
        "url": {}
      }
    ],
    "date": "2021-03-01",
    "categories": [],
    "contents": "\nIntroduction\nPrinciple component analysis is an awesome way to visualize data that is more than 2D, and can help tease out relationships between variables. In this blog I will explore how Gelada monkeys and rodent eating predators share space. I collected this data in the Menz-Guassa Conservation Area in the highlands of Ethiopia from January-May 2018 as part of my work with the Guassa Gelada Research Project. The data is composed of point counts for birds of prey, Gelada monkeys, and Ethiopian wolves, and was collected with the goal of seeing how Geladas impact hunting behavior of animals that eat rodents. This project was inspired by this study by Dr. Venkataraman that found Ethiopian wolves hunt rodents more successfully in the presence of Geladas. Here I will only explore how animal presence/absences are correlated with the presence/absence of other species.\nNo idea what a gelada monkey is? Here’s a picture I took!\nmonkeys!PCA Plot\n\n\nshow code\n\n#read in data stored then clean names and replace NA value with 0\nsky_focals <- read_excel(here(\"Sky_Focals_Complete.xls\")) %>% \n  clean_names() %>% \n  mutate_all(~replace(., is.na(.), 0))\n\n#Limit to animal observations\nsky_focals_limited <- sky_focals %>% \n  select(number_gels, aug, taw, harrier_sp, e_wolves)\n\n#Change Everything to Numeric!\nsky_focals_limited$number_gels <- as.numeric(sky_focals_limited$number_gels)\nsky_focals_limited$aug <- as.numeric(sky_focals_limited$aug)\nsky_focals_limited$taw <-as.numeric(sky_focals_limited$taw)\nsky_focals_limited$harrier_sp <- as.numeric(sky_focals_limited$harrier_sp)\nsky_focals_limited$e_wolves <- as.numeric(sky_focals_limited$e_wolves)\n\n#changing the names of columns\ncolnames(sky_focals_limited) = c(\"Number of Geladas\", \"Augur Buzzards\", \"Tawny Eagles\", \"Harriers\", \"Ethiopian Wolves\")\n\n#PCA\nsky_focal_pca <- sky_focals_limited %>%\n  scale() %>% #I used the scale function to limit the impact that Geladas would have on the variance. It is normal to have 300+ Geladas in a troop, but not normal for birds of prey to group together.\n  prcomp()\n\n#call to view\nsky_focal_pca\n\n\nStandard deviations (1, .., p=5):\n[1] 1.1508941 1.0525452 0.9972318 0.8959521 0.8777187\n\nRotation (n x k) = (5 x 5):\n                          PC1        PC2        PC3          PC4\nNumber of Geladas  0.57202198 -0.3683941 0.10499430  0.019898840\nAugur Buzzards    -0.44194345 -0.5453647 0.15537565  0.694421323\nTawny Eagles      -0.51507950 -0.4294614 0.13864713 -0.704207237\nHarriers           0.05494484  0.2231613 0.97067290 -0.003914903\nEthiopian Wolves   0.45733032 -0.5767366 0.05835832 -0.146491989\n                          PC5\nNumber of Geladas  0.72502199\nAugur Buzzards     0.03001360\nTawny Eagles       0.18741709\nHarriers          -0.07041934\nEthiopian Wolves  -0.65829951\n\nshow code\n\n#PCA bi-plot\nautoplot(sky_focal_pca, \n         data = sky_focals,\n         loadings = TRUE, \n         loadings.label = TRUE,\n         loadings.label.hjust = 1.2) +\n  theme_classic() +\n  labs(caption = \"Principle Component Analysis Bi-plot Showing Species Associations in the Highlands of Ethiopia. Data and Graph: Iris foxfoot\") \n\n\n\n\nConclusions\nSo how do you interpret a PCA biplot? There’s a lot that goes into a PCA biplot, but some of the main takeaways are that the angles of the arrows show how correlated characteristics are. If they are closer than 90 degrees, they are positively correlated, at 90 degrees they are uncorrelated, and if they are more than 90 degrees apart, they are negitively correlated. The length of the arrows also conveys information about how much weight a characteristic has in a Principle Component. So what are my main conclusions?\nThe number of Gelada monkeys and the number of Ethiopian wolves are positively correlated. This result upholds Dr. Venkataraman’s study!\nGeladas are moderately negatively correlated with harrier species and Augur Buzzards, while Geladas and Tawny Eagles are more negatively correlated. Interesting!\nAugur Buzzards and harrier species are very negatively correlated. This is a great example of a pattern I never would have investigated if I hadn’t used PCA as an exploratory tool. Always explore your data!\n\n\n\n",
    "preview": "posts/2021-03-01-pca-plot/pca-plot_files/figure-html5/unnamed-chunk-1-1.png",
    "last_modified": "2021-03-01T16:36:28-08:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-02-24-california-cetaceans-raster-analysus/",
    "title": "California Cetaceans Raster Analysis",
    "description": "In this post I will explore cetaceans species presence off of the coast of southern California using raster data!",
    "author": [
      {
        "name": "iris foxfoot",
        "url": {}
      }
    ],
    "date": "2021-02-24",
    "categories": [],
    "contents": "\nIn this blog I will demonstrate some simple raster data manuvers. Raster data is a type of spatial data used to describe continuous variables. Since actual continuity is infinitely large (way to big for github), raster data breaks up space into cells, and each cell carries specific information about continuous variable in question.\nIn this example each cell carries information about how many cetacean species could be present. More accurately, each cell contains a probability that a species is present.\nclick “show code” to see which packages I used!\n\n\nshow code\n\nknitr::opts_chunk$set(\n  echo = FALSE,\n  message = FALSE,\n  warning = FALSE\n)\nlibrary(raster) ### NOTE: attaching this BEFORE tidyverse\nlibrary(tidyverse)\nlibrary(here)\nlibrary(sf)\n\n\n\nIn this next code chunk I’ll read in a bunch of raster files into a ‘raster stack’ then I’ll create a function to determine which species are 80% likely to occur in each cell, then I add all the rasters in the stack up. Finally I’ll convert it to a dataframe and graph it!\n\n\nshow code\n\n#read in the data (this gathers it all up)\nmy_files <- list.files(here(\"ca_cetaceans\"), full.names = TRUE)\n\n#this reads in the data as a raster stack\ncetaceans_raster <- raster::stack(my_files)\n\n#this function determines if a cell has a .8 probability of containing a species.\nis_present <- function(x, thresh = .8) {\n  y <- ifelse(x >= thresh, 1, NA)\n  return(y)\n}\n\n#applying the function to the raster stack\nspecies <- calc(cetaceans_raster, fun = is_present) \n\n#adding up all the species presences in each cell\ncetaceans <- calc(species, fun = sum, na.rm = TRUE)  \n\n#plot it! For funsies\n#plot(cetaceans)\n\n#this converts the raster to a dataframe\ncetaceans_df <- raster::rasterToPoints(cetaceans) %>%\n  as.data.frame()\n\n#add some coastline from the rnaturalearth package\ncoastline110 <- rnaturalearth::ne_download(scale = 110, type = 'states', category = 'cultural', returnclass = \"sf\")\n\n#graph it\nggplot() + \n  geom_raster(data = cetaceans_df, aes(x=x,y=y, fill = layer)) + geom_sf(data = coastline110, color = \"black\", fill = \"gray\") + \n  coord_sf(expand = 0, xlim = c(-125, -115), ylim = c(32, 42)) +\n  scale_fill_gradientn(colors = c(\"white\", \"orchid\",\"purple\")) +\n  theme_void() +\n  theme(plot.caption = element_text(hjust = 0)) +\n  labs(caption = \"Species Richness of of the Coast of Southern California and Northern Baja\\neach cell shows the number of cetaceans for which there is an 80% chance\\nor higher that they are present. Data: Kaschner et al\")\n\n\n\n\nAquamaps Citation: Kaschner, K., Rius-Barile, J., Kesner-Reyes, K., Garilao, C., Kullander, S., Rees, T., & Froese, R. (2016). AquaMaps: Predicted range maps for aquatic species. www.aquamaps.org\n\n\n\n",
    "preview": "posts/2021-02-24-california-cetaceans-raster-analysus/california-cetaceans-raster-analysus_files/figure-html5/unnamed-chunk-1-1.png",
    "last_modified": "2021-02-25T11:44:43-08:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-02-24-palmetto-logistic-regression/",
    "title": "Palmetto Binary Logistic Regression",
    "description": "In this post I will demonstrate a simple example of binary logistic regression using data on two palmetto species in Florida.",
    "author": [
      {
        "name": "iris foxfoot",
        "url": {}
      }
    ],
    "date": "2021-02-24",
    "categories": [],
    "contents": "\nIntro\nIn this blog I will use binary logistic regression to predict which species of palmetto observations belong to, then I will compare my results against the actual data, to see how accurate my model is.\nPalmettos are small, tropical palms with fan like leaves. In my model, I will use the number of green leaves, height, width, and length to distinguish between two species in Florida: Serenoa repens, and Sabal etonia.\nI’m using data collected by Abrahamson, W.G. 2019, freely available via the Environmental Data Initiative. See the data citation for more information!\nclick “show code” to see what packages I used in the set up chunk\n\n\nshow code\n\nknitr::opts_chunk$set(\n  echo = FALSE,\n  message = FALSE,\n  warning = FALSE\n)\nlibrary(here)\nlibrary(tidyverse)\nlibrary(broom)\nlibrary(jtools)\nlibrary(janitor)\nlibrary(kableExtra)\nlibrary(knitr)\n\n\n\nData Exploration & Visualization\nIt’s always a good idea to look at your data in a few different ways before you even try any statistical modeling!\n\n\nshow code\n\n#Read in the Data\npalmetto <- read_csv(here(\"palmetto.csv\"))\n\n#rename species category because it's annoying\npalmetto$species[palmetto$species == \"1\"] <- \"Serenoa repens\"\npalmetto$species[palmetto$species == \"2\"] <- \"Sabal etonia\"\n\n#convert species to factor for analyses\npalmetto$species <-as.factor(palmetto$species)\n\n#view it, then make some exploratory graphs\n#1 = Serenoa repens, 2 = Sabal etonia\n\n#A ggplot graph showing width and length in the two species\nggplot(data = palmetto, aes(x = width, y = length, fill = species)) + \n  geom_violin() + \n  facet_wrap(~species) + \n  scale_fill_manual(values=c('orange','black')) +\n  theme_minimal() +\n  theme(plot.caption = element_text(hjust = 0), legend.position = \"none\") +\n  labs(x = \"width (cm)\", y = \"length (cm)\",\n       caption = \"Figure 1: Width and length of Sabal etonia vs Serenoa repens palmettos in South Central Florida (Data: Abrahamson)\\nLength is defined as the widest area of the canopy and width is the widest area of the canpopy perpendicular to the \\nlength. From this graph you can see that Sabal etonia has a slightly larger mean length.\")\n\n\n\nshow code\n\n#another ggplot exploring height and number of green leaves\nggplot(data = palmetto, aes(x = green_lvs, y = height, color = species)) + \n  geom_point() + \n  scale_color_manual(values=c('orange','black')) +\n  theme_minimal() +\n  theme(plot.caption = element_text(hjust = 0)) +\n  labs(x = \"Number of Green Leaves\", y = \"Height (cm)\",\n       caption = \"Figure 2. Differences in number of green leaves vs height in Sabal Etonia and Serenoa repens (Data: Abrahamson)\\nSerenoa repens tends to have a higher number of green leaves. It is difficult to tell if there is a meaningful difference in \\nheight\")\n\n\n\n\nBinary Logistic Regression\nAfter I’ve explored the data, I’ll use binomial regression to ‘predict’ what species of palmetto an observation is based on height, width, letght, and the number of green leaves.\nVisualization isn’t just for the exploratory phase, it’s a great tool for organizing model outputs. Here I’ve made a nice table to help organize the outputs\n\n\nshow code\n\n#levels(palmetto$species)\n#seet is first level\n\n#binomial regression\npalmetto_blr <- glm(species ~ height + width + length + green_lvs, data = palmetto, family = \"binomial\")\n\n#call the model to view or summary of the model using summary()\n\n#tidy table\nbroom::tidy(palmetto_blr) %>%\n  mutate(p.value = format(p.value, scientific = TRUE)) %>% \n  kbl(caption = \"Palmetto Binary Logistic Regression Model Outputs - Reference Level = Sabal etonia (Data: Abrahamson)\") %>% \n  kable_classic()\n\n\n\nTable 1: Palmetto Binary Logistic Regression Model Outputs - Reference Level = Sabal etonia (Data: Abrahamson)\n\n\nterm\n\n\nestimate\n\n\nstd.error\n\n\nstatistic\n\n\np.value\n\n\n(Intercept)\n\n\n-3.2266851\n\n\n0.1420708\n\n\n-22.71180\n\n\n3.424977e-114\n\n\nheight\n\n\n0.0292173\n\n\n0.0023061\n\n\n12.66984\n\n\n8.689251e-37\n\n\nwidth\n\n\n-0.0394434\n\n\n0.0021000\n\n\n-18.78227\n\n\n1.054719e-78\n\n\nlength\n\n\n-0.0458233\n\n\n0.0018661\n\n\n-24.55600\n\n\n3.731697e-133\n\n\ngreen_lvs\n\n\n1.9084747\n\n\n0.0388634\n\n\n49.10728\n\n\n0.000000e+00\n\n\nModel Success\nEven with my amazing table, it can be hard to understand the results in this format. Here I’ve converted the output into a prediction based on a 50% probability threshold, and then again summarized my results in a table.\nYou can see that even though exploratory visualization showed a lot of overlap between species variables, the model did a pretty good job!\n\n\nshow code\n\n#store in as probabilities\nblr_fitted <- palmetto_blr %>% \n  broom::augment(type.predict = \"response\")\n\n#convert .fitted value to prediction based on 50% probability threshold\nsp_prediction_df <- blr_fitted %>% \n  mutate(sp_prediction = \n           if_else(.fitted < .5, \"Sabal etonia\", \"Serenoa repens\")) %>% \n  mutate(prediction_correct = \n           if_else(species == sp_prediction, \"yes\", \"no\"))\n\n#make an initial table of counts\npalmetto_prediction_counts <- sp_prediction_df %>% \n  tabyl(species, prediction_correct)\n\n#table with proportions using adorn()\npalmetto_table_proportions <- palmetto_prediction_counts %>% \n  janitor::adorn_percentages() %>% \n  janitor::adorn_pct_formatting(digits = 2) %>% \njanitor::adorn_ns()\n\n#finalized table using kable extra package\npalmetto_table_proportions %>%  \n  kbl(caption = \"Palmetto species and model prediction accuracy (Data: Abrahamson)\",\n      col.names = c(\"Species\", \n                    \"Not Accurately Predicted\", \n                    \"Accurately Predicted\")\n      ) %>%\n    kable_classic(font =\"cambria\")\n\n\n\nTable 2: Palmetto species and model prediction accuracy (Data: Abrahamson)\n\n\nSpecies\n\n\nNot Accurately Predicted\n\n\nAccurately Predicted\n\n\nSabal etonia\n\n\n7.38% (454)\n\n\n92.62% (5701)\n\n\nSerenoa repens\n\n\n9.23% (564)\n\n\n90.77% (5548)\n\n\nData Citation\nAbrahamson, W.G. 2019. Survival, growth and biomass estimates of two dominant palmetto species of south-central Florida from 1981 - 2017, ongoing at 5-year intervals ver 1. Environmental Data Initiative. https://doi.org/10.6073/pasta/f2f96ec76fbbd4b9db431c79a770c4d5\n\n\n\n",
    "preview": "posts/2021-02-24-palmetto-logistic-regression/palmetto-logistic-regression_files/figure-html5/unnamed-chunk-1-1.png",
    "last_modified": "2021-02-25T11:29:45-08:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-01-30-welcome/",
    "title": "welcome",
    "description": "Welcome to my blog!",
    "author": [
      {
        "name": "iris foxfoot",
        "url": {}
      }
    ],
    "date": "2021-01-30",
    "categories": [],
    "contents": "\n\n\n\n",
    "preview": {},
    "last_modified": "2021-01-30T09:04:14-08:00",
    "input_file": {}
  }
]

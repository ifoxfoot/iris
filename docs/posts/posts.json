[
  {
    "path": "posts/2021-02-24-california-cetaceans-raster-analysus/",
    "title": "California Cetaceans Raster Analysus",
    "description": "In this post I will explore cetaceans species presence off of the coast of southern California using raster data!",
    "author": [
      {
        "name": "iris foxfoot",
        "url": {}
      }
    ],
    "date": "2021-02-24",
    "categories": [],
    "contents": "\n\n\nshow code\n\nknitr::opts_chunk$set(\n  echo = TRUE,\n  message = FALSE,\n  warning = FALSE\n)\nlibrary(raster) ### NOTE: attaching this BEFORE tidyverse\nlibrary(tidyverse)\nlibrary(here)\nlibrary(sf)\n\n\n\n\n\nshow code\n\n#read in the data (this gathers it all up)\nmy_files <- list.files(here(\"ca_cetaceans\"), full.names = TRUE)\n\n#this reads in the data as a raster stack\ncetaceans_raster <- raster::stack(my_files)\n\n#this function determines if a cell has a .8 probability of containing a species.\nis_present <- function(x, thresh = .8) {\n  y <- ifelse(x >= thresh, 1, NA)\n  return(y)\n}\n\n#applying the function to the raster stack\nspecies <- calc(cetaceans_raster, fun = is_present) \n\n#adding up all the species presences in each cell\ncetaceans <- calc(species, fun = sum, na.rm = TRUE)  \n\n#plot it! For funsies\n#plot(cetaceans)\n\n#this converts the raster to a dataframe\ncetaceans_df <- raster::rasterToPoints(cetaceans) %>%\n  as.data.frame()\n\n#add some coastline from the rnaturalearth package\ncoastline110 <- rnaturalearth::ne_download(scale = 110, type = 'states', category = 'cultural', returnclass = \"sf\")\n\n#graph it\nggplot() + \n  geom_raster(data = cetaceans_df, aes(x=x,y=y, fill = layer)) + geom_sf(data = coastline110, color = \"black\", fill = \"darkgray\") + \n  coord_sf(expand = 0, xlim = c(-125, -115), ylim = c(32, 42)) +\n  scale_fill_gradientn(colors = c(\"white\", \"orchid\",\"purple\")) +\n  theme_void() +\n  theme(plot.caption = element_text(hjust = 0)) +\n  labs(caption = \"Species Richness of of the Coast of Southern California and Northern Baja\\neach cell shows the number of cetaceans for which there is an 80% chance\\nor higher that they are present. Data: Kaschner et al\")\n\n\n\n\nAquamaps Citation: Kaschner, K., Rius-Barile, J., Kesner-Reyes, K., Garilao, C., Kullander, S., Rees, T., & Froese, R. (2016). AquaMaps: Predicted range maps for aquatic species. www.aquamaps.org\n\n\n\n",
    "preview": "posts/2021-02-24-california-cetaceans-raster-analysus/california-cetaceans-raster-analysus_files/figure-html5/unnamed-chunk-2-1.png",
    "last_modified": "2021-02-24T12:31:32-08:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-02-24-palmetto-logistic-regression/",
    "title": "Palmetto Binary Logistic Regression",
    "description": "In this post I will demonstrate a simple example of binary logistic regression using data on two palmetto species in florida.",
    "author": [
      {
        "name": "iris foxfoot",
        "url": {}
      }
    ],
    "date": "2021-02-24",
    "categories": [],
    "contents": "\nData Exploration & Vizualization\n\n\nshow code\n\n#Read in the Data\npalmetto <- read_csv(here(\"palmetto.csv\"))\n\n#rename species category because it's annoying\npalmetto$species[palmetto$species == \"1\"] <- \"Serenoa repens\"\npalmetto$species[palmetto$species == \"2\"] <- \"Sabal etonia\"\n\n#convert species to factor for analyses\npalmetto$species <-as.factor(palmetto$species)\n\n#view it, then make some exploratory graphs\n#1 = Serenoa repens, 2 = Sabal etonia\n\nggplot(data = palmetto, aes(x = width, y = length, fill = species)) + \n  geom_violin() + \n  facet_wrap(~species) + \n  scale_fill_manual(values=c('orange','black')) +\n  theme_minimal() +\n  theme(plot.caption = element_text(hjust = 0), legend.position = \"none\") +\n  labs(x = \"width (cm)\", y = \"length (cm)\",\n       caption = \"Figure 1: Width and length of Sabal etonia vs Serenoa repens palmettos in South Central Florida (Data: Abrahamson)\\nLength is defined as the widest area of the canopy and width is the widest area of the canpopy perpendicular to the \\nlength. From this graph you can see that Sabal etonia has a slightly larger mean length.\")\n\n\n\nshow code\n\nggplot(data = palmetto, aes(x = green_lvs, y = height, color = species)) + \n  geom_point() + \n  scale_color_manual(values=c('orange','black')) +\n  theme_minimal() +\n  theme(plot.caption = element_text(hjust = 0)) +\n  labs(x = \"Number of Green Leaves\", y = \"Height (cm)\",\n       caption = \"Figure 2. Differences in number of green leaves vs height in Sabal Etonia and Serenoa repens (Data: Abrahamson)\\nSerenoa repens tends to have a higher number of green leaves. It is difficult to tell if there is a meaningful difference in \\nheight\")\n\n\n\n\nBinary Logistic Regression\n\n\nshow code\n\n#levels(palmetto$species)\n#seet is first level\n\n#binomial regression\npalmetto_blr <- glm(species ~ height + width + length + green_lvs, data = palmetto, family = \"binomial\")\n\n#call the model to view or summary of the model using summary()\n\n#tidy table\nbroom::tidy(palmetto_blr) %>%\n  mutate(p.value = format(p.value, scientific = TRUE)) %>% \n  kbl(caption = \"Palmetto Binary Logistic Regression Model Outputs - Reference Level = Sabal etonia (Data: Abrahamson)\") %>% \n  kable_classic()\n\n\n\nTable 1: Palmetto Binary Logistic Regression Model Outputs - Reference Level = Sabal etonia (Data: Abrahamson)\n\n\nterm\n\n\nestimate\n\n\nstd.error\n\n\nstatistic\n\n\np.value\n\n\n(Intercept)\n\n\n-3.2266851\n\n\n0.1420708\n\n\n-22.71180\n\n\n3.424977e-114\n\n\nheight\n\n\n0.0292173\n\n\n0.0023061\n\n\n12.66984\n\n\n8.689251e-37\n\n\nwidth\n\n\n-0.0394434\n\n\n0.0021000\n\n\n-18.78227\n\n\n1.054719e-78\n\n\nlength\n\n\n-0.0458233\n\n\n0.0018661\n\n\n-24.55600\n\n\n3.731697e-133\n\n\ngreen_lvs\n\n\n1.9084747\n\n\n0.0388634\n\n\n49.10728\n\n\n0.000000e+00\n\n\nModel Success\n\n\nshow code\n\n#store in as probabilities\nblr_fitted <- palmetto_blr %>% \n  broom::augment(type.predict = \"response\")\n\n#convert .fitted value to prediction based on 50% probability threshold\nsp_prediction_df <- blr_fitted %>% \n  mutate(sp_prediction = \n           if_else(.fitted < .5, \"Sabal etonia\", \"Serenoa repens\")) %>% \n  mutate(prediction_correct = \n           if_else(species == sp_prediction, \"yes\", \"no\"))\n\n#make an initial table of counts\npalmetto_prediction_counts <- sp_prediction_df %>% \n  tabyl(species, prediction_correct)\n\n#table with proportions using adorn()\npalmetto_table_proportions <- palmetto_prediction_counts %>% \n  janitor::adorn_percentages() %>% \n  janitor::adorn_pct_formatting(digits = 2) %>% \njanitor::adorn_ns()\n\n#finalized table using kable extra package\npalmetto_table_proportions %>%  \n  kbl(caption = \"Palmetto species and model prediction accuracy (Data: Abrahamson)\",\n      col.names = c(\"Species\", \n                    \"Not Accurately Predicted\", \n                    \"Accurately Predicted\")\n      ) %>%\n    kable_classic(font =\"cambria\")\n\n\n\nTable 2: Palmetto species and model prediction accuracy (Data: Abrahamson)\n\n\nSpecies\n\n\nNot Accurately Predicted\n\n\nAccurately Predicted\n\n\nSabal etonia\n\n\n7.38% (454)\n\n\n92.62% (5701)\n\n\nSerenoa repens\n\n\n9.23% (564)\n\n\n90.77% (5548)\n\n\nData Citation\nAbrahamson, W.G. 2019. Survival, growth and biomass estimates of two dominant palmetto species of south-central Florida from 1981 - 2017, ongoing at 5-year intervals ver 1. Environmental Data Initiative. https://doi.org/10.6073/pasta/f2f96ec76fbbd4b9db431c79a770c4d5\n\n\n\n",
    "preview": "posts/2021-02-24-palmetto-logistic-regression/palmetto-logistic-regression_files/figure-html5/unnamed-chunk-1-1.png",
    "last_modified": "2021-02-24T11:06:17-08:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-01-30-welcome/",
    "title": "welcome",
    "description": "Welcome to my blog!",
    "author": [
      {
        "name": "iris foxfoot",
        "url": {}
      }
    ],
    "date": "2021-01-30",
    "categories": [],
    "contents": "\n\n\n\n",
    "preview": {},
    "last_modified": "2021-01-30T09:04:14-08:00",
    "input_file": {}
  }
]
